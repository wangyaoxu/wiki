<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/colorful.css">
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/style.css">
    <link rel="shortcut icon" href="/wiki/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/wiki/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>Docker - wiki</title>
    <meta name="keywords" content="technology, machine learning, data mining, economics, accounting"/>
    <meta name="description" content="A wiki website of wangyaoxu when I learned new knowledgy and technics."/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
  </head>

  <body>
    <div id="container" class="typo">
      
<div id="header">
  <div id="post-nav">
    <a href="/wiki/">wiki</a>
    &nbsp;&#187;&nbsp;
    <a href="/wiki/#tool">tool</a>
    &nbsp;&#187;&nbsp;Docker
    <span class="updated">当前页面最后更新&nbsp;
    2017-09-14 15:10
    
    </span>
  </div>
</div>
<div class="clearfix"></div>
<div id="content">
  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#_1">前言</a></li>
<li><a href="#_2">基础</a><ul>
<li><a href="#cmd-entrypoint">CMD 与 ENTRYPOINT 的区别</a></li>
</ul>
</li>
<li><a href="#_3">遇到的问题</a><ul>
<li><a href="#loop-module">loop module</a></li>
<li><a href="#_4">内核支持</a></li>
<li><a href="#docker-hub">docker hub 墙</a></li>
<li><a href="#registry">针对registry的搜索</a></li>
<li><a href="#docker-stop-vs-docker-kill">docker stop vs. docker kill</a></li>
</ul>
</li>
<li><a href="#docker-registry">Docker Registry</a></li>
<li><a href="#docker-compose">Docker Compose</a></li>
<li><a href="#_5">一些链接</a></li>
</ul>
</div>
<p><a href="https://www.docker.com/">Docker</a> Build, Ship, Run; An open platform for distributed applications for developers and sysadmins</p>
<h2 id="_1">前言</h2>
<p>下面5个链接是2014年的博客, 基于0.10.0, 当前是1.9.x (有些已经失效)</p>
<ul>
<li><a href="http://blog.tankywoo.com/docker/2014/05/08/docker-1-start.html">Docker 1 -- 开始</a></li>
<li><a href="http://blog.tankywoo.com/docker/2014/05/08/docker-2-dockerfile.html">Docker 2 -- 关于Dockerfile</a></li>
<li><a href="http://blog.tankywoo.com/docker/2014/05/08/docker-3-docker-registry.html">Docker 3 -- 自建Docker Registry</a></li>
<li><a href="http://blog.tankywoo.com/docker/2014/05/08/docker-4-summary.html">Docker 4 -- 总结</a></li>
<li><a href="http://blog.tankywoo.com/2014/12/22/docker-bridge-network.html">Docker 网络桥接</a></li>
</ul>
<p>入门参考:</p>
<ul>
<li><a href="http://docs.docker.com/linux/started/">Docker - Get Started</a></li>
<li><a href="https://docs.docker.com/">Docker - Docs</a></li>
</ul>
<p>其实以前入门时, 有一个Interactive commandline tutorial, 我觉得挺好的, 但是现在没了.</p>
<p>那个时候docker官网的域名还是docker.io, 现在已经把docker.com拿下了, 变化还是挺大的.</p>
<p>实践：</p>
<ul>
<li><a href="http://crosbymichael.com/dockerfile-best-practices.html">Dockerfile Best Practices</a> / <a href="http://dockone.io/article/131">Dockerfile最佳实践</a></li>
<li><a href="https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/">Best practices for writing Dockerfiles</a></li>
</ul>
<h2 id="_2">基础</h2>
<p>docker的分层镜像，支持devicemapper, aufs, btrfs。</p>
<p>目前本地1.11.0版本，默认是devicemapper</p>
<p>关于aufs，有两篇文章：</p>
<ul>
<li><a href="http://coolshell.cn/articles/17061.html">Docker基础技术：AUFS</a></li>
<li><a href="http://fengchj.com/?tag=aufs%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F">Docker容器和镜像存储机制</a></li>
</ul>
<p>另外关于devicemapper，在同步系统时遇到一个问题：</p>
<p>rsync同步时/var/lib/docker/devicemapper/devicemapper/data这个文件显示100G，已经超出机器存储的总大小。</p>
<p>第一感觉就是类似esxi的精简置备(thin provisioning)，网上搜了下，linux下叫<a href="https://en.wikipedia.org/wiki/Sparse_file"><code>sparse file</code></a></p>
<blockquote>
<p>In computer science, a sparse file is a type of computer file that attempts to use file system space more efficiently when the file itself is mostly empty.</p>
</blockquote>
<p><code>ls</code>命令的<code>-s</code>参数可以看到实际使用大小:</p>
<div class="hlcode"><pre><span class="err">$</span> <span class="n">ls</span> <span class="o">-</span><span class="n">alsh</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">docker</span><span class="o">/</span><span class="n">devicemapper</span><span class="o">/</span><span class="n">devicemapper</span>
<span class="n">total</span> <span class="mi">952</span><span class="n">M</span>
<span class="mf">4.0</span><span class="n">K</span> <span class="n">drwx</span><span class="o">------</span> <span class="mi">2</span> <span class="n">root</span> <span class="n">root</span> <span class="mf">4.0</span><span class="n">K</span> <span class="n">Jul</span>  <span class="mi">6</span> <span class="mi">17</span><span class="o">:</span><span class="mi">12</span> <span class="p">.</span>
<span class="mf">4.0</span><span class="n">K</span> <span class="n">drwx</span><span class="o">------</span> <span class="mi">5</span> <span class="n">root</span> <span class="n">root</span> <span class="mf">4.0</span><span class="n">K</span> <span class="n">Jul</span>  <span class="mi">6</span> <span class="mi">19</span><span class="o">:</span><span class="mi">14</span> <span class="p">..</span>
<span class="mi">950</span><span class="n">M</span> <span class="o">-</span><span class="n">rw</span><span class="o">-------</span> <span class="mi">1</span> <span class="n">root</span> <span class="n">root</span> <span class="mi">100</span><span class="n">G</span> <span class="n">Jul</span>  <span class="mi">6</span> <span class="mi">22</span><span class="o">:</span><span class="mi">25</span> <span class="n">data</span>
<span class="mf">2.0</span><span class="n">M</span> <span class="o">-</span><span class="n">rw</span><span class="o">-------</span> <span class="mi">1</span> <span class="n">root</span> <span class="n">root</span> <span class="mf">2.0</span><span class="n">G</span> <span class="n">Jul</span>  <span class="mi">6</span> <span class="mi">22</span><span class="o">:</span><span class="mi">25</span> <span class="n">metadata</span>
</pre></div>


<p>比如data文件，最前面是实际使用大小950M, 后面100G是最大分配的大小。但是rsync同步时是会按100G数据来同步的，并且这个也应该排除。</p>
<p>参考：</p>
<ul>
<li><a href="http://serverfault.com/questions/344518/in-linux-how-can-i-create-thin-provisioned-file-so-it-can-be-mounted-and-a-file">In Linux, how can I create thin-provisioned file so it can be mounted and a filesystem created on it?</a></li>
<li><a href="http://unix.stackexchange.com/questions/86442/finding-sparse-files">Finding sparse files?</a></li>
</ul>
<p>使用国内的 Docker Hub Mirror，编辑 <code>/etc/docker/daemon.json</code>，加上如使用 ustc：</p>
<div class="hlcode"><pre><span class="p">{</span>
    <span class="s">&quot;registry-mirrors&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s">&quot;https://docker.mirrors.ustc.edu.cn/&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>


<p>参考：</p>
<ul>
<li><a href="http://mirrors.ustc.edu.cn/help/dockerhub.html">Docker Hub 源使用帮助</a></li>
<li><a href="http://www.itfanr.cc/2017/01/14/ubuntu-install-docker-and-configure-mirror-accelerator/">Ubuntu16.04安装Docker及配置镜像加速器</a></li>
</ul>
<h3 id="cmd-entrypoint">CMD 与 ENTRYPOINT 的区别</h3>
<p>简单的说：</p>
<ul>
<li>两者都是在在container启动时执行，两者在Dockerfile总都只能有一条</li>
<li>CMD的内容可以在<code>docker run &lt;image&gt; &lt;your cmd&gt;</code>时被your cmd覆盖</li>
<li>ENTRYPOINT不会被覆盖，默认是<code>/bin/sh -c</code></li>
<li>ENTRYPOINT优先于CMD执行，所以两者可以配合</li>
</ul>
<p>更详细可以看看这几篇，资源都不错：</p>
<ul>
<li><a href="https://docs.docker.com/engine/reference/builder/#/entrypoint">Dockerfile reference - ENTRYPOINT</a></li>
<li><a href="https://segmentfault.com/q/1010000000417103">Dockerfile里指定执行命令用ENTRYPOING和用CMD有何不同？</a></li>
<li><a href="http://crosbymichael.com/dockerfile-best-practices.html">Dockerfile Best Practices</a> 5. CMD and ENTRYPOINT better together一节</li>
<li><a href="http://stackoverflow.com/questions/21553353/what-is-the-difference-between-cmd-and-entrypoint-in-a-dockerfile">What is the difference between CMD and ENTRYPOINT in a Dockerfile?</a></li>
<li><a href="https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/#/entrypoint">Best practices for writing Dockerfiles</a></li>
</ul>
<h2 id="_3">遇到的问题</h2>
<h3 id="loop-module">loop module</h3>
<p>Gentoo下安装docker后启动报错, 看日志:</p>
<blockquote>
<p>level=info msg="Listening for HTTP on unix (/var/run/docker.sock)"<br />
level=error msg="There are no more loopback devices available."<br />
level=fatal msg="Error starting daemon: error initializing graphdriver: loopback mounting failed"</p>
</blockquote>
<p>原因是没有加载<code>loop</code>模块. 在<code>/etc/conf.d/modules</code> 中加入模块:</p>
<div class="hlcode"><pre><span class="err">$</span> <span class="n">cat</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">conf</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">modules</span>
<span class="cp"># You can define a list modules for a specific kernel version,</span>
<span class="cp"># a released kernel version, a main kernel version or just a list.</span>
<span class="cp"># The most specific versioned variable will take precedence.</span>
<span class="cp">#modules_2_6_23_gentoo_r5=&quot;ieee1394 ohci1394&quot;</span>
<span class="cp">#modules_2_6_23=&quot;tun ieee1394&quot;</span>
<span class="cp">#modules_2_6=&quot;tun&quot;</span>
<span class="cp">#modules_2=&quot;ipv6&quot;</span>
<span class="cp">#modules=&quot;ohci1394&quot;</span>

<span class="cp"># You can give modules a different name when they load - the new name</span>
<span class="cp"># will also be used to pick arguments below.</span>
<span class="cp">#modules=&quot;dummy:dummy1&quot;</span>

<span class="cp"># Give the modules some arguments if needed, per version if necessary.</span>
<span class="cp"># Again, the most specific versioned variable will take precedence.</span>
<span class="cp">#module_ieee1394_args=&quot;debug&quot;</span>
<span class="cp">#module_ieee1394_args_2_6_23_gentoo_r5=&quot;debug2&quot;</span>
<span class="cp">#module_ieee1394_args_2_6_23=&quot;debug3&quot;</span>
<span class="cp">#module_ieee1394_args_2_6=&quot;debug4&quot;</span>
<span class="cp">#module_ieee1394_args_2=&quot;debug5&quot;</span>

<span class="cp"># You should consult your kernel documentation and configuration</span>
<span class="cp"># for a list of modules and their options.</span>
<span class="n">modules</span><span class="o">=</span><span class="s">&quot;loop&quot;</span>
</pre></div>


<p>然后加载模块: <code>modprobe loop</code></p>
<h3 id="_4">内核支持</h3>
<p>一个是iptables nat表, 编译内核时忘了打开nat支持了, 导致docker启动不了(docker开启不修改iptables选项应该就没事了).</p>
<p>打开内核选项:</p>
<div class="hlcode"><pre><span class="n">CONFIG_IP_NF_NAT</span>
</pre></div>


<p><a href="https://forums.gentoo.org/viewtopic-t-1009770.html?sid=7822e8eefcdb28edcedf9db7526b7b1e">can't initialize iptables table <code>nat'</code></a></p>
<p>安装完docker顺便发现有如下提示:</p>
<div class="hlcode"><pre><span class="o">*</span> <span class="n">Messages</span> <span class="k">for</span> <span class="n">package</span> <span class="n">app</span><span class="o">-</span><span class="n">emulation</span><span class="o">/</span><span class="n">docker</span><span class="o">-</span><span class="mf">1.10.0</span><span class="o">:</span>

<span class="o">*</span>   <span class="n">CONFIG_IP_NF_TARGET_MASQUERADE</span><span class="o">:</span>     <span class="n">is</span> <span class="n">not</span> <span class="n">set</span> <span class="n">when</span> <span class="n">it</span> <span class="n">should</span> <span class="n">be</span><span class="p">.</span>
<span class="o">*</span>   <span class="n">CONFIG_CGROUP_HUGETLB</span><span class="o">:</span>      <span class="n">is</span> <span class="n">not</span> <span class="n">set</span> <span class="n">when</span> <span class="n">it</span> <span class="n">should</span> <span class="n">be</span><span class="p">.</span>
<span class="o">*</span>   <span class="n">CONFIG_CGROUP_NET_PRIO</span><span class="o">:</span>     <span class="n">is</span> <span class="n">not</span> <span class="n">set</span> <span class="n">when</span> <span class="n">it</span> <span class="n">should</span> <span class="n">be</span><span class="p">.</span>
<span class="o">*</span> <span class="n">Please</span> <span class="n">check</span> <span class="n">to</span> <span class="n">make</span> <span class="n">sure</span> <span class="n">these</span> <span class="n">options</span> <span class="n">are</span> <span class="n">set</span> <span class="n">correctly</span><span class="p">.</span>
<span class="o">*</span> <span class="n">Failure</span> <span class="n">to</span> <span class="k">do</span> <span class="n">so</span> <span class="n">may</span> <span class="n">cause</span> <span class="n">unexpected</span> <span class="n">problems</span><span class="p">.</span>
</pre></div>


<p>就顺便一起重新编译内核了.</p>
<p>官方也提供了内核参数检查的脚本 <a href="https://github.com/docker/docker/blob/master/contrib/check-config.sh">docker/contrib/check-config.sh</a></p>
<h3 id="docker-hub">docker hub 墙</h3>
<p>可以通过配置<code>HTTP_PROXY</code>来解决：</p>
<div class="hlcode"><pre><span class="n">HTTP_PROXY</span><span class="o">=</span><span class="n">http</span><span class="o">:</span><span class="c1">//127.1:8123 docker pull busybox</span>
</pre></div>


<p>讨论帖：</p>
<ul>
<li><a href="https://github.com/docker/docker/issues/11093">set http/https proxy through command line</a></li>
<li><a href="https://github.com/docker/docker/issues/5989">please add support for socks5 proxy</a></li>
</ul>
<p>1.11版本好像支持socks5代理了</p>
<h3 id="registry">针对registry的搜索</h3>
<p>基于registry v1，列出全部的镜像：</p>
<div class="hlcode"><pre><span class="nv">$ </span>curl http://localhost:5000/v1/search 2&gt;/dev/null | jq <span class="s1">&#39;.results[].name&#39;</span>
<span class="s2">&quot;library/mongodb&quot;</span>
<span class="s2">&quot;library/elasticsearch&quot;</span>
<span class="s2">&quot;library/python&quot;</span>
<span class="s2">&quot;library/golang&quot;</span>
</pre></div>


<p>搜索某个镜像仓库，<code>docker search</code>指定仓库url：</p>
<div class="hlcode"><pre><span class="nv">$ </span>docker search http://localhost:5000/python
NAME             DESCRIPTION   STARS     OFFICIAL   AUTOMATED
library/python                 0
</pre></div>


<p>列出某个镜像仓库的所有tags，参考<a href="https://docs.docker.com/v1.6/reference/api/registry_api/#tags">官方registry api</a>：</p>
<div class="hlcode"><pre><span class="nv">$ </span>curl http://localhost:5000/v1/repositories/library/python/tags 2&gt;/dev/null | jq <span class="s1">&#39;.&#39;</span>
<span class="o">{</span>
  <span class="s2">&quot;2.7&quot;</span>: <span class="s2">&quot;7a7d87336a3328623e3fb332a8752b940097aec03e4d39804721bfda2fa2a08d&quot;</span>
<span class="o">}</span>
</pre></div>


<p>官方Registry即：</p>
<div class="hlcode"><pre>curl https://registry.hub.docker.com/v1/repositories/ubuntu/tags 2&gt;/dev/null | jq <span class="s1">&#39;.[].name&#39;</span>
<span class="s2">&quot;10.04&quot;</span>
<span class="s2">&quot;12.10&quot;</span>
<span class="s2">&quot;13.04&quot;</span>
...
</pre></div>


<h3 id="docker-stop-vs-docker-kill">docker stop vs. docker kill</h3>
<p>具体看help和man</p>
<ul>
<li><code>docker stop</code>会先发SIGTERM信号，等待默认10s后发SIGKILL信号 (graceful关闭)</li>
<li><code>docker kill</code>直接发送默认SIGKILL信号，也可以指定其它信号 (暴力关闭)</li>
</ul>
<h2 id="docker-registry">Docker Registry</h2>
<p>docker registry 最开始是 v1 版本，参见我三年前写的博客 <a href="https://blog.tankywoo.com/2014/05/08/docker-3-docker-registry.html">Docker 3 -- 自建Docker Registry</a>，但是现在这个版本已经过时了，更多的是使用 v2 版本。</p>
<p>部署 docker registry 最简单的方法就是直接通过 docker 镜像来运行，docker hub 上的地址 <a href="https://hub.docker.com/_/registry/">registry</a>。直接 pull 然后运行，不过运行前建议先看看 Dockerfile，比如 push 上去的镜像是放在 <code>/var/lib/registry</code>，所以建议将本地目录挂载到容器的这个目录，否则容器重启后数据就没了，具体的启动命令见：</p>
<div class="hlcode"><pre><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">d</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5000</span><span class="o">:</span><span class="mi">5000</span> <span class="o">--</span><span class="n">restart</span> <span class="n">always</span> <span class="o">--</span><span class="n">name</span> <span class="n">registry</span> \
        <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">data</span><span class="o">:/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">registry</span> \
        <span class="nl">registry:</span><span class="mi">2</span>
</pre></div>


<p>注意要指定为 v2 的版本。</p>
<p>推送到 registry 根据镜像的前缀确认推送的地址，所以需要给本地的镜像打一个额外的tag：</p>
<div class="hlcode"><pre><span class="n">docker</span> <span class="n">tag</span> <span class="n">alpine</span><span class="o">:</span><span class="n">latest</span> <span class="mf">127.0.0.1</span><span class="o">:</span><span class="mi">5000</span><span class="o">/</span><span class="n">alpine</span>
</pre></div>


<p>然后推送到本地的 registry。</p>
<p>可以通过如下查看目前有哪些镜像：</p>
<div class="hlcode"><pre><span class="n">curl</span> <span class="n">http</span><span class="o">:</span><span class="c1">//127.0.0.1:5000/v2/_catalog</span>
</pre></div>


<p>关于认证，没有深入研究，直接使用了 registry 自带的 basic auth，参考 <a href="https://docs.docker.com/registry/deploying/#native-basic-auth">native basic auth</a>：</p>
<div class="hlcode"><pre><span class="cp"># 创建一个 auth 目录，生成简单认证的用户密码对</span>
<span class="err">$</span> <span class="n">mkdir</span> <span class="n">auth</span>
<span class="err">$</span> <span class="n">docker</span> <span class="n">run</span> \
        <span class="o">--</span><span class="n">entrypoint</span> <span class="n">htpasswd</span> \
        <span class="nl">registry:</span><span class="mi">2</span> <span class="o">-</span><span class="n">Bbn</span> <span class="n">testuser</span> <span class="n">testpassword</span> <span class="o">&gt;</span> <span class="n">auth</span><span class="o">/</span><span class="n">htpasswd</span>
</pre></div>


<p>当然如果安装了 <code>apache-tools</code> 也可以直接使用 <code>htpasswd</code> 命令生成：</p>
<div class="hlcode"><pre><span class="n">htpasswd</span> <span class="o">-</span><span class="n">bBn</span> <span class="n">testuser</span> <span class="n">testpassword</span> <span class="o">&gt;</span> <span class="n">auth</span><span class="o">/</span><span class="n">htpasswd</span>
</pre></div>


<p>注意 <code>-B</code> 参数，使用 bcrypt 加密。</p>
<p>新的启动命令：</p>
<div class="hlcode"><pre><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">d</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5000</span><span class="o">:</span><span class="mi">5000</span> <span class="o">--</span><span class="n">restart</span> <span class="n">always</span> <span class="o">--</span><span class="n">name</span> <span class="n">registry</span> \
        <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">data</span><span class="o">:/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">registry</span> \
        <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">auth</span><span class="o">:/</span><span class="n">auth</span> \
        <span class="o">-</span><span class="n">e</span> <span class="s">&quot;REGISTRY_AUTH=htpasswd&quot;</span> \
        <span class="o">-</span><span class="n">e</span> <span class="s">&quot;REGISTRY_AUTH_HTPASSWD_REALM=Registry Realm&quot;</span> \
        <span class="o">-</span><span class="n">e</span> <span class="n">REGISTRY_AUTH_HTPASSWD_PATH</span><span class="o">=/</span><span class="n">auth</span><span class="o">/</span><span class="n">htpasswd</span> \
        <span class="nl">registry:</span><span class="mi">2</span>
</pre></div>


<p>然后通过 <code>docker login</code> 来登录，登录会话保存到 <code>~/.docker/config.json</code> 中，使用 <code>docker logout</code> 删除。通过 curl 访问：</p>
<div class="hlcode"><pre><span class="n">curl</span> <span class="o">-</span><span class="n">u</span> <span class="n">testuser</span><span class="o">:</span><span class="n">testpassword</span> <span class="o">--</span><span class="n">basic</span>  <span class="n">http</span><span class="o">:</span><span class="c1">//127.0.0.1:5000/v2/_catalog</span>
</pre></div>


<p>看到还有推荐 <a href="https://github.com/cesanta/docker_auth">cesanta/docker_auth</a> 这个仓库，未尝试。</p>
<h2 id="docker-compose">Docker Compose</h2>
<p>顾名思义，一个 <code>Dockerfile</code> 是针对于一个容器（服务），编排就是将项目所包含的一组服务组合起来，是更高一级的配置管理。</p>
<p><a href="https://docs.docker.com/compose/">Docker Compose</a> 安装参考官方 <a href="https://docs.docker.com/compose/install/#install-compose">Install Compose</a>，官方直接提供了编译好的二进制程序，放到 <code>$PATH</code> 下即可，或者通过 <code>pip</code> 安装。</p>
<p>下面这两篇都给出了一样的例子，通过 flask web 配合 redis 做一个简单的demo：</p>
<ul>
<li><a href="https://lw900925.github.io/docker/docker-compose-getting-started.html">Docker：容器编排利器Compose（起步篇）</a></li>
<li><a href="https://www.centos.bz/2017/08/docker-compose-container-choreography/">使用docker-compose实现容器编排</a></li>
</ul>
<p>Docker Compose 会给里面定义的各服务做相应的 dns 记录，使一组服务之间方便互联。</p>
<p>其它参考：</p>
<ul>
<li><a href="https://yeasy.gitbooks.io/docker_practice/content/compose/">Docker Compose 项目</a></li>
</ul>
<h2 id="_5">一些链接</h2>
<ul>
<li><a href="https://www.gitbook.com/book/yeasy/docker_practice/details">Docker —— 从入门到实践</a></li>
<li><a href="https://dashboard.daocloud.io/packages">国内daocloud的一些镜像</a> 国内现在没找到什么好的仓库, 这个算一个, 就是镜像略少</li>
</ul>
  
</div>
    </div>
    <div id="footer">
      <div class="footer-left">
        <p>
        Copyright © 2012-2020 wangyaoxu.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
        Theme by <a href="https://github.com/tankywoo/yasimple_x2" target="_blank">YASimple_X2</a>.
        </p>
        <p>本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。</p>
      </div> <!-- end footer-left -->
      <div class="footer-right">
        <p>站点最后生成 2020-09-25 05:31:15</p>
        <p><a href="https://github.com/tankywoo/wiki.tankywoo.com">Fork me on Github</a></p>
        <p><a href="http://www.miitbeian.gov.cn/">京ICP备16016622号</a></p>
      </div> <!-- end footer-right -->
    </div>

    
    

    <script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F754de327571c0ba7ff50a61fc964e196' type='text/javascript'%3E%3C/script%3E"));
    </script>
  </body>
</html>